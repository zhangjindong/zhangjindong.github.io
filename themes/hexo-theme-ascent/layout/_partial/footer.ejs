<% if (theme.intensedebate.enable && theme.intensedebate.acct){ %> <%- css('css/comments') %> <% } %> <% if
(is_archive() || is_category() || is_tag()){ %>
<script type="text/javascript">
  let tgl = (s) => {
    x = document.getElementsByName("expand");
    for (let i = 0; i < x.length; i++) x[i].checked = s.checked;
  };
</script>
<% } %> <% if (theme.settings){ %>
<div id="settings-container">
  <div id="to-top" onclick="window.scrollTo({left: 0, top: 0,behavior: 'smooth' })">Top</div>
  <div id="dark-mode">dark</div>
  <div id="sans-font">sans</div>
</div>
<script type="text/javascript">
  let d = document,
    style = d.documentElement.style,
    setProperty = style.setProperty.bind(style),
    ls = localStorage,
    mode = ls.getItem("mode") || (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches),
    sans = ls.getItem("sans"),
    darkMode = d.getElementById("dark-mode"),
    darkFun = () => {
      setProperty("--bg-color", "#fafafa");
      setProperty("--code-bg-color", "#f4f4f4");
      setProperty("--text-color", "#212121");
      setProperty("--secondary-color", "#808080");
      setProperty("--tertiary-color", "#b0b0b0");
      setProperty("--link-color", "#b5c8cf");
      setProperty("--link-hover-color", "#618794");
      setProperty("--link-bg-color", "#dae4e7");
      setProperty("--selection-color", "#dae4e7");
      darkMode.innerHTML = "dark";
    },
    lightFun = () => {
      setProperty("--bg-color", "#212121");
      setProperty("--code-bg-color", "#292929");
      setProperty("--text-color", "#fff");
      setProperty("--secondary-color", "#c0c0c0");
      setProperty("--tertiary-color", "#6e6e6e");
      setProperty("--link-color", "#4d6b75");
      setProperty("--link-hover-color", "#96b1bb");
      setProperty("--link-bg-color", "#5d828e");
      setProperty("--selection-color", "#acc1c9");
      darkMode.innerHTML = "light";
    },
    sansFont = d.getElementById("sans-font"),
    sansFun = () => {
      setProperty("--body-stack", '"Lora", "Georgia", "Times New Roman", serif');
      sansFont.innerHTML = "sans";
    },
    serifFun = () => {
      setProperty("--body-stack", '"Lato", "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "Verdana", sans-serif');
      sansFont.innerHTML = "serif";
    };
  darkMode.onclick = () => {
    if (mode == 2) {
      mode = 1;
      ls.setItem("mode", mode);
      lightFun();
    } else {
      mode = 2;
      ls.setItem("mode", mode);
      darkFun();
    }
  };
  sansFont.onclick = () => {
    if (sans == 2) {
      sans = 1;
      ls.setItem("sans", sans);
      serifFun();
    } else {
      sans = 2;
      ls.setItem("sans", sans);
      sansFun();
    }
  };
  if (!mode) {
    mode = 2;
    ls.setItem("mode", 2);
  }
  if (mode == 1) {
    lightFun();
  }
  if (!sans) {
    sans = 2;
    ls.setItem("sans", 2);
  }
  if (sans == 1) {
    serifFun();
  }
</script>
<% } %> <% if (theme.google_analytics.enable && theme.google_analytics.acct){ %>
<script type="text/javascript">
  (function (window, document, docName, url, r, a, m) {
    window["GoogleAnalyticsObject"] = r;
    (window[r] =
      window[r] ||
      function () {
        (window[r].q = window[r].q || []).push(arguments);
      }),
      (window[r].l = 1 * new Date());
    (a = document.createElement(docName)), (m = document.getElementsByTagName(docName)[0]);
    a.async = 1;
    a.src = url;
    m.parentNode.insertBefore(a, m);
  })(window, document, "script", "//www.google-analytics.com/analytics.js", "ga");

  ga("create", "<%= theme.google_analytics.acct %>", "auto");
  ga("send", "pageview");
</script>
<% } %>
